/* ===== Глобально: коректні розрахунки ширин ===== */
*, *::before, *::after { box-sizing: border-box; }

/* ===== Тема / змінні ===== */
:root{
  --bmb-pink:#ffcdd6;
  --bmb-pink-strong:#ff9fb8;
  --bmb-pink-hover:#ffb7c8;
  --track:#e9edf3;
  --panel:#f7f7fa;

  --radius:24px;

  /* Максимальна ширина контенту сторінки (карти/хедера/картки) */
  --content-max: 980px;

  /* Внутрішня «колонка» в картці (textarea, кнопки) */
  --action-w: 560px;

  /* горизонтальні поля сторінки */
  --page-pad: 16px;

  /* індикатор прогресу */
  --progress-h: 8px;                      /* товщина тонкої лінії */
  --cap-d: calc(var(--progress-h) * 2.2); /* діаметр кружечка з лого */
  --cap-border: calc(var(--progress-h) / 4);
}

/* ===== Layout сторінки ===== */
.scenario-list{
  /* рівні відступи від краю екрана, з урахуванням iOS safe-area */
  padding-top: 24px;
  padding-bottom: 56px;
  padding-left: max(var(--page-pad), env(safe-area-inset-left));
  padding-right: max(var(--page-pad), env(safe-area-inset-right));

  background:
    radial-gradient(1200px 600px at 50% -10%, rgba(255,205,214,.20), transparent 60%),
    linear-gradient(#fff, #fff);
}

/* Хедер тримаємо у «контейнері» по центру */
.scenario-header{
  display:flex;
  justify-content: space-between;
  align-items:center;

  width: min(100%, var(--content-max));
  margin: 6px auto 14px; /* auto = по центру */
}
.scenario-header h2{ margin:0; }
.scenario-status-panel{ display:flex; gap:10px; align-items:center; }
.notify-btn{
  padding:8px 12px; border-radius:999px; border:none; background:#000; color:#fff; cursor:pointer;
}

/* ===== Картка ===== */
.scenario-card{
  width: min(100%, var(--content-max));   /* по центру та не ширше контенту */
  margin: 18px auto;
  padding: 22px;

  background: var(--panel);
  border: 1px solid #fff;
  border-radius: var(--radius);
  box-shadow: 0 8px 24px rgba(0,0,0,.04);

  display:flex; flex-direction:column; align-items:center;
  animation: cardFade .2s ease-out;
}
@keyframes cardFade{
  from{ transform: translateY(4px); opacity:.0; }
  to{ transform: translateY(0); opacity:1; }
}

/* Внутрішня колонка контенту у картці — теж центр і фіксована max-width */
.scenario-info,
.scenario-actions{
  width: min(100%, var(--action-w));
  margin-inline: auto;          /* строгий центр */
}

/* Текстова область */
.scenario-info textarea{
  width:100%; min-height: 160px; resize:vertical;
  background:#fff; border:none; border-radius:18px; padding:12px 14px;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.05);
}
.scenario-info textarea:focus{
  outline:none;
  box-shadow:
    inset 0 0 0 1px rgba(0,0,0,.05),
    0 0 0 3px rgba(255,205,214,.55);
}

/* мета-рядок */
.meta-row{ display:flex; gap:24px; margin: 12px 0 6px; }
.meta-col .meta-label{ font-size:12px; opacity:.7; }
.meta-col .meta-value{ font-weight:600; }

/* ===== Індикатор статусу (тонкий) ===== */
.bmb-progress-wrap{
  position:relative;
  width:100%;
  height: calc(var(--cap-d) + 18px); /* даємо простір під пілюлю/кап */
  margin: 6px 0 10px;
}
.bmb-track{
  position:absolute; left:0; right:0; top:50%;
  height: var(--progress-h);
  transform: translateY(-50%);
  background: var(--track);
  border-radius: 999px;
  overflow:hidden;
}
.bmb-fill{
  position:absolute; left:0; top:50%;
  height: var(--progress-h);
  transform: translateY(-50%);
  background: linear-gradient(90deg, var(--bmb-pink), var(--bmb-pink-strong));
  border-radius: 999px;
  transition: width .25s ease;
}
.bmb-cap{
  position:absolute;
  top:50%;
  transform: translate(-50%, -50%);
  width: var(--cap-d);
  height: var(--cap-d);
  border-radius: 999px;
  background:#fff;
  border: var(--cap-border) solid #fff;
  box-shadow: 0 4px 12px rgba(255, 154, 178, .45), 0 1px 0 rgba(0,0,0,.06);
  display:grid; place-items:center;
  pointer-events:none;
  z-index: 2;
}
.bmb-cap img{ width:80%; height:80%; object-fit:contain; display:block; }

/* пілюля суми */
.bmb-amount-wrap{
  position:absolute;
  bottom: calc(100% + 6px);
  transform: translateX(-50%);
  display:flex; align-items:center; gap:6px;
  z-index:3;
}
.bmb-amount-pill{
  width: 90px; height: 30px;
  border:none; outline:none;
  border-radius: 999px;
  padding: 0 10px;
  background:#fff;
  box-shadow: 0 4px 12px rgba(0,0,0,.06);
  text-align:center;
  font-weight:700;
}
.bmb-amount-pill:disabled{ background:#fff; opacity:.85; }
.bmb-amount-currency{
  padding: 5px 10px;
  background:#fff; border-radius:999px;
  box-shadow: 0 4px 12px rgba(0,0,0,.06);
  font-weight:700;
}

/* ===== Дії / Кнопки ===== */
.scenario-actions{
  display:flex; flex-direction:column; gap:12px; align-items:center;
  margin-top: 16px;
}
.btn{
  width:100%;
  padding:14px 18px;
  border:none; border-radius:999px; font-weight:700;
  background: var(--bmb-pink);
  color:#000; cursor:pointer;
  transition: transform .05s ease, background-color .2s ease, box-shadow .15s ease;
  box-shadow: 0 2px 0 rgba(0,0,0,.05);
}
.btn:hover{ background: var(--bmb-pink-hover); }
.btn:active{ transform: translateY(1px); box-shadow: 0 1px 0 rgba(0,0,0,.05); }
.btn:disabled{ opacity:.5; cursor:not-allowed; }
.flags-line{ font-size:12px; opacity:.65; margin-top:6px; }
.scenario-actions .btn.checked{
  background:#ffdbe3;
  color:#111;
  font-weight:700;
  cursor:default;
}

/* ===== Mobile tweaks ===== */
@media (max-width: 640px){
  /* однакові поля від країв, обидва блоки по центру */
  :root{ --page-pad: 16px; }

  .scenario-header{
    width: min(100%, var(--content-max));
    margin: 6px auto 14px;
    flex-direction: column;
    gap: 8px;
    text-align: center;
  }

  .meta-row{ flex-direction:column; gap:6px; }

  /* гарантуємо рівну «рамку» по краях для внутрішніх блоків */
  .scenario-info,
  .scenario-actions{
    width: min(100%, var(--action-w));
    margin-left: auto;
    margin-right: auto;
  }
}
