/* ===== Контейнер мапи: стабільна висота та відступ під навбар ===== */
.map-view-container{
  --sb-h: 80px;               /* висота сторісбару */
  position: relative;
  width: 100%;
  height: calc(var(--app-vh, 1vh) * 100);
  min-height: 100vh;
  overscroll-behavior: none;
  overflow: hidden;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;

  /* звільняємо місце під навбар */
  padding-top: var(--nav-h, 64px);
  z-index: 0;
}

/* Мапа займає весь простір контейнера */
.map-container{ width: 100%; height: 100%; z-index: 1; }

/* ===== СТОРІСБАР — ПІД НАВБАРОМ І НИЖЧЕ ШТОРКИ ===== */
.storybar-overlay{
  position: fixed;
  left: 0; right: 0;
  top: calc(var(--nav-h, 64px));  /* впритул під навбар */
  height: var(--sb-h, 80px);      /* явна висота, щоб не було великої клікової площі */
  z-index: 1500;                  /* нижче backdrop:1999 і drawer:2000 */
  pointer-events: none;           /* не блокує карту */
  transform: translateZ(0);
  backface-visibility: hidden;
}
.storybar-overlay .story-bar{ pointer-events: auto; }

/* Внутрішня стрічка (сам компонент StoryBar рендерить .story-bar) */
.story-bar{
  display: flex; align-items: center; gap: 12px;
  padding: 8px 12px;
  background: #fff;
  overflow-x: auto; overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
  box-shadow: 0 1px 0 rgba(0,0,0,.06);
}

/* ===== Ліфлет-контроли — опустити під сторісбар ===== */
.map-view-container .leaflet-top.leaflet-left{
  top: calc(var(--nav-h, 64px) + var(--sb-h, 80px));
}

/* ===== Маячки на карті (аватар з білим кільцем) ===== */
.custom-marker.small{
  width: 40px; height: 40px; border-radius: 50%;
  overflow: hidden; border: 3px solid #fff;
  box-shadow: 0 0 6px rgba(0,0,0,.9);
  display: flex; justify-content: center; align-items: center;
}
.marker-img{ width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }

/* ===== Рейтинг (10 чорних зірок) ===== */
.rating-row{ display:flex; align-items:center; justify-content:center; gap:8px; margin:6px 0 14px; white-space:nowrap; }
.stars-wrap{ position:relative; width:172px; height:18px; line-height:18px; font-size:17px; letter-spacing:2px; user-select:none; }
.stars-bg,.stars-fill{ position:absolute; top:0; left:0; overflow:hidden; font-weight:700; }
.stars-bg{ color:#e5e7eb; width:100%; }
.stars-fill{ color:#111827; width:0; }
.rating-number{ font-weight:700; color:#111827; font-size:14px; }
