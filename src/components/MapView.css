/* MapView.css — стабільна карта + сторісбар */

:root{
  --nav-h: 64px;
  --sb-h: 80px; /* висота сторісбару (кружок 64 + падинги 8*2) */
}

/* Контейнер мапи */
.map-view-container{
  position: relative;
  width: 100%;
  height: 100dvh;
  height: calc(var(--app-vh, 1vh) * 100); /* fallback */
  min-height: 100vh;
  overscroll-behavior: none;
  overflow: hidden;
  isolation: isolate;              /* свій стек для z-index */
  will-change: transform;
  backface-visibility: hidden;
  background: #fff;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/* Карта — на весь контейнер */
.map-container{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
}

/* Сторісбар — під навбаром, не блокує карту */
.storybar-overlay{
  position: fixed;
  left: 0; right: 0;
  top: var(--nav-h);
  z-index: 1500;           /* нижче backdrop:1999 і drawer:2000 */
  pointer-events: none;    /* контейнер прозорий для кліків */
  transform: translateZ(0);
  backface-visibility: hidden;
}
.storybar-overlay .story-bar{ pointer-events: auto; }

.story-bar{
  display: flex; align-items: center; gap: 12px;
  padding: 8px 12px;
  background: #fff;
  overflow-x: auto; overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
  box-shadow: 0 1px 0 rgba(0,0,0,.06);
}

/* Ліфлет-контроли — нижче сторісбару */
.map-view-container .leaflet-top.leaflet-left{
  top: calc(var(--nav-h) + var(--sb-h));
}

/* Маркери */
.custom-marker.small{
  width: 40px; height: 40px; border-radius: 50%;
  overflow: hidden; border: 3px solid #fff;
  box-shadow: 0 0 6px rgba(0,0,0,.9);
  display: flex; justify-content: center; align-items: center;
}
.marker-img{ width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }

/* Рейтинг */
.rating-row{ display:flex; align-items:center; justify-content:center; gap:8px; margin:6px 0 14px; white-space:nowrap; }
.stars-wrap{ position:relative; width:172px; height:18px; line-height:18px; font-size:17px; letter-spacing:2px; user-select:none; }
.stars-bg,.stars-fill{ position:absolute; top:0; left:0; overflow:hidden; font-weight:700; }
.stars-bg{ color:#e5e7eb; width:100%; }
.stars-fill{ color:#111827; width:0; }
.rating-number{ font-weight:700; color:#111827; font-size:14px; }
