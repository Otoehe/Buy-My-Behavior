/* ===== Контейнер мапи: стабільна висота ===== */
.map-view-container{
  --sb-h: 80px;                 /* висота сторісбару */
  --nav-h: 64px;                /* висота навбара (fallback) */

  position: relative;
  width: 100%;
  height: calc(var(--app-vh, 1vh) * 100);
  min-height: 100vh;
  overscroll-behavior: none;
  overflow: hidden;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;

  /* щоб контент мапи не «зайшов» під навбар + сторісбар */
  padding-top: calc(var(--nav-h, 64px) + var(--sb-h));
}

/* Мапа займає весь простір під навбаром + сторісбаром */
.map-container{
  position: absolute;
  inset: calc(var(--nav-h, 64px) + var(--sb-h)) 0 0 0; /* не перекриває навбар */
  z-index: 1;
}

/* ===== СТОРІСБАР — всередині контейнера, без fixed ===== */
.storybar-overlay{
  position: absolute;
  left: 0; right: 0; top: var(--nav-h, 64px);
  height: var(--sb-h);
  z-index: 2;                    /* нижче будь-яких модалок/шторок */
  pointer-events: none;          /* сам шар не ловить кліки */
}
.storybar-overlay .story-bar{ pointer-events: auto; }

/* ===== Ліфлет-контроли — вони вже нижче сторісбару ===== */
.map-view-container .leaflet-top.leaflet-left{
  top: calc(var(--nav-h, 64px) + var(--sb-h) + 8px);
}

/* ===== Маячки на карті (аватар з білим кільцем) ===== */
.custom-marker.small{
  width: 40px; height: 40px; border-radius: 50%;
  overflow: hidden; border: 3px solid #fff;
  box-shadow: 0 0 6px rgba(0,0,0,.9);
  display: flex; justify-content: center; align-items: center;
}
.marker-img{ width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }

/* ===== Рейтинг (10 чорних зірок) ===== */
.rating-row{ display:flex; align-items:center; justify-content:center; gap:8px; margin:6px 0 14px; white-space:nowrap; }
.stars-wrap{ position:relative; width:172px; height:18px; line-height:18px; font-size:17px; letter-spacing:2px; user-select:none; }
.stars-bg,.stars-fill{ position:absolute; top:0; left:0; overflow:hidden; font-weight:700; }
.stars-bg{ color:#e5e7eb; width:100%; }
.stars-fill{ color:#111827; width:0; }
.rating-number{ font-weight:700; color:#111827; font-size:14px; }
