# üì° BMB Realtime Push Notifications System

## üéØ –û–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–∏

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ push-—Å–ø–æ–≤—ñ—â–µ–Ω—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ BuyMyBehavior, —è–∫–∞ –∑–∞–±–µ–∑–ø–µ—á—É—î –Ω–∞–¥—ñ–π–Ω—É –¥–æ—Å—Ç–∞–≤–∫—É —Å–ø–æ–≤—ñ—â–µ–Ω—å –ø—Ä–æ –∑–º—ñ–Ω–∏ —Å—Ç–∞—Ç—É—Å—ñ–≤ —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤, —É–≥–æ–¥ —Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π —á–µ—Ä–µ–∑ Web3 escrow.

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏

### –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:

1. **RealtimeNotificationManager** - –≥–æ–ª–æ–≤–Ω–∏–π –∫–ª–∞—Å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è realtime –∑'—î–¥–Ω–∞–Ω–Ω—è–º–∏
2. **Universal Notifications** - –∫—Ä–æ—Å—Å-–±—Ä–∞—É–∑–µ—Ä–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Å–ø–æ–≤—ñ—â–µ–Ω—å
3. **Supabase Realtime** - –ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–∞–Ω–∞–ª –¥–ª—è realtime –æ–Ω–æ–≤–ª–µ–Ω—å
4. **Polling Fallback** - —Ä–µ–∑–µ—Ä–≤–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ Realtime
5. **Auto-reconnection** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω–Ω—è

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
src/lib/
‚îú‚îÄ‚îÄ realtimeNotifications.ts    # –ì–æ–ª–æ–≤–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä Realtime —Å–∏—Å—Ç–µ–º–∏
‚îú‚îÄ‚îÄ universalNotifications.ts   # –ö—Ä–æ—Å—Å-–±—Ä–∞—É–∑–µ—Ä–Ω—ñ push —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
‚îú‚îÄ‚îÄ pushNotifications.ts        # –ë–∞–∑–æ–≤—ñ push —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
‚îî‚îÄ‚îÄ supabase.ts                # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Supabase

src/components/
‚îú‚îÄ‚îÄ ReceivedScenarios.tsx       # UI –¥–ª—è –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤ (–∑ realtime)
‚îú‚îÄ‚îÄ MyOrders.tsx               # UI –¥–ª—è –∑–∞–º–æ–≤–Ω–∏–∫—ñ–≤ (–∑ realtime)
‚îî‚îÄ‚îÄ ...

tests/
‚îú‚îÄ‚îÄ realtime-demo.html         # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è realtime —Å–∏—Å—Ç–µ–º–∏
‚îú‚îÄ‚îÄ test-universal-notifications.html  # –¢–µ—Å—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω—å
‚îú‚îÄ‚îÄ test-reconnection.html     # –¢–µ—Å—Ç–∏ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω–Ω—è
‚îî‚îÄ‚îÄ test-notifications.html    # –ë–∞–∑–æ–≤—ñ —Ç–µ—Å—Ç–∏
```

## üöÄ –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### 1. Realtime –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –∞–≤—Ç–æ–≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è–º

```typescript
// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
const success = await initializeRealtimeNotifications(userId);

// –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É
const status = realtimeNotificationManager.getConnectionStatus();
// { isListening: true, method: 'realtime', userId: 'user-123', reconnectAttempts: 0 }

// –†—É—á–Ω–µ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è
await realtimeNotificationManager.restart();
```

### 2. Universal Push Notifications

```typescript
// –ë–∞–∑–æ–≤–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
await showNotification('–ù–æ–≤–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π!', {
  body: '–£ –≤–∞—Å —î –Ω–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è',
  sound: true,
  vibrate: [200, 100, 200],
  timeout: 5000
});

// –ó onClick –æ–±—Ä–æ–±–Ω–∏–∫–æ–º
await showNotification('–£–≥–æ–¥–∞ –ø—ñ–¥–ø–∏—Å–∞–Ω–∞', {
  body: '–í—Å—ñ —Å—Ç–æ—Ä–æ–Ω–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏–ª–∏ —É–º–æ–≤–∏',
  onClick: () => navigateToScenario(scenarioId),
  requireInteraction: true
});
```

### 3. React Hooks —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

```typescript
// –£ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ
const useRealtimeNotifications = (userId: string) => {
  const [status, setStatus] = React.useState(getRealtimeStatus());
  
  React.useEffect(() => {
    const initRealtime = async () => {
      await initializeRealtimeNotifications(userId);
      setStatus(realtimeNotificationManager.getConnectionStatus());
    };
    
    initRealtime();
    return () => cleanupRealtimeNotifications();
  }, [userId]);
  
  return status;
};
```

## üìã –¢–∏–ø–∏ —Å–ø–æ–≤—ñ—â–µ–Ω—å

### –°—Ü–µ–Ω–∞—Ä—ñ—ó –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É:

1. **scenario_created** - –Ω–æ–≤–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π —Å—Ç–≤–æ—Ä–µ–Ω–æ
2. **status_changed** - –∑–º—ñ–Ω–∞ —Å—Ç–∞—Ç—É—Å—É (draft ‚Üí agreed ‚Üí confirmed ‚Üí completed)
3. **agreement_signed** - —É–≥–æ–¥–∞ –ø—ñ–¥–ø–∏—Å–∞–Ω–∞ –æ–±–æ–º–∞ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏
4. **completion_confirmed** - –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ

### –¢–∏–ø–∏ —Å—Ç–∞—Ç—É—Å—ñ–≤:

- `draft` - —á–µ—Ä–Ω–µ—Ç–∫–∞
- `published` - –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ
- `agreed` - –ø–æ–≥–æ–¥–∂–µ–Ω–æ
- `confirmed` - –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ
- `completed` - –∑–∞–≤–µ—Ä—à–µ–Ω–æ
- `disputed` - —Å–ø—ñ—Ä
- `cancelled` - —Å–∫–∞—Å–æ–≤–∞–Ω–æ

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Cooldown:

```typescript
private readonly COOLDOWN_MS = 5000; // 5 —Å–µ–∫—É–Ω–¥ –º—ñ–∂ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è–º–∏
private pollingIntervalTime = 15000;  // 15 —Å–µ–∫—É–Ω–¥ –¥–ª—è polling
private maxReconnectAttempts = 5;     // –º–∞–∫—Å–∏–º—É–º 5 —Å–ø—Ä–æ–± –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è
private reconnectDelay = 2000;        // –ø–æ—á–∞—Ç–∫–æ–≤–∞ –∑–∞—Ç—Ä–∏–º–∫–∞ 2 —Å–µ–∫—É–Ω–¥–∏
```

### Supabase Realtime Events:

```typescript
// –ü—ñ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∑–º—ñ–Ω–∏ –≤ —Ç–∞–±–ª–∏—Ü—ñ scenarios
supabase
  .channel('scenarios-changes')
  .on('postgres_changes',
    { 
      event: '*', 
      schema: 'public', 
      table: 'scenarios',
      filter: `creator_id=eq.${userId}` 
    },
    handleScenarioChange
  )
  .subscribe();
```

## üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω–Ω—è

1. **–ü–æ—á–∞—Ç–∫–æ–≤–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è** - —Å–ø—Ä–æ–±–∞ Supabase Realtime
2. **Fallback** - –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ polling –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ
3. **–ê–≤—Ç–æ–≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è** - –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–∞–ª—å–Ω–∞ –∑–∞—Ç—Ä–∏–º–∫–∞ (2s, 4s, 8s, 16s, 32s)
4. **–ú–∞–∫—Å–∏–º—É–º —Å–ø—Ä–æ–±** - 5 —Å–ø—Ä–æ–±, –ø–æ—Ç—ñ–º –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –Ω–∞ polling
5. **–£—Å–ø—ñ—à–Ω–µ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è** - —Å–∫–∏–¥–∞–Ω–Ω—è –ª—ñ—á–∏–ª—å–Ω–∏–∫–∞ —Å–ø—Ä–æ–±

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –î–µ–º–æ-—Å—Ç–æ—Ä—ñ–Ω–∫–∏:

1. **realtime-demo.html** - –ø–æ–≤–Ω–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–∏
   - –°–∏–º—É–ª—è—Ü—ñ—è –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤
   - –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫ —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è
   - –†–µ–∞–ª—å–Ω—ñ push —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è

2. **test-reconnection.html** - —Ç–µ—Å—Ç–∏ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω–Ω—è
   - –°–∏–º—É–ª—è—Ü—ñ—è –≤—Ç—Ä–∞—Ç–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è
   - –°—Ç—Ä–µ—Å-—Ç–µ—Å—Ç–∏ (5 —Ü–∏–∫–ª—ñ–≤)
   - –¢–µ—Å—Ç–∏ –∑–∞—Ç—Ä–∏–º–∫–∏ –º–µ—Ä–µ–∂—ñ
   - –ë–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–∏–π —Ç–µ—Å—Ç (30 —Å–µ–∫—É–Ω–¥)

3. **test-universal-notifications.html** - —Ç–µ—Å—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω—å
   - –ë–∞–∑–æ–≤—ñ push —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
   - –ö—Ä–æ—Å—Å-–±—Ä–∞—É–∑–µ—Ä–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å
   - –ê—É–¥—ñ–æ —Ç–∞ –≤—ñ–±—Ä–∞—Ü—ñ—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ç–µ—Å—Ç–∏:

```bash
# –ó–±—ñ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç—É
npm run build

# –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
npm run dev

# –í—ñ–¥–∫—Ä–∏—Ç–∏ –¥–µ–º–æ-—Å—Ç–æ—Ä—ñ–Ω–∫–∏:
# http://localhost:5173/realtime-demo.html
# http://localhost:5173/test-reconnection.html
```

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø–æ–∫–∞–∑–Ω–∏–∫—ñ–≤:

- **–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø–æ–≤—ñ—â–µ–Ω—å** - totalNotifications
- **–£—Å–ø—ñ—à–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è** - successfulNotifications  
- **–°–ø—Ä–æ–±–∏ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è** - reconnectAttempts
- **–ú–µ—Ç–æ–¥ –∑'—î–¥–Ω–∞–Ω–Ω—è** - 'realtime' | 'polling' | 'none'
- **–ß–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ** - avgReconnectTime

### –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π:

```typescript
console.log('üîó Realtime notifications –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ –¥–ª—è:', userId);
console.log('üì° Supabase Realtime –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ');
console.log('üîÑ –ü–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ polling fallback');
console.log('‚úÖ –ó\'—î–¥–Ω–∞–Ω–Ω—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ');
```

## üõ°Ô∏è –ë–µ–∑–ø–µ–∫–∞ —Ç–∞ –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å

### –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ —Å–ø–∞–º—É:

- **Cooldown –ø–µ—Ä—ñ–æ–¥** - 5 —Å–µ–∫—É–Ω–¥ –º—ñ–∂ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏ –æ–¥–Ω–æ–≥–æ —Ç–∏–ø—É
- **–î–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—è** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —É–Ω—ñ–∫–∞–ª—å–Ω–æ—Å—Ç—ñ –∑–∞ scenarioId + eventType
- **Rate limiting** - –æ–±–º–µ–∂–µ–Ω–Ω—è —á–∞—Å—Ç–æ—Ç–∏ —á–µ—Ä–µ–∑ Map lastNotificationTime

### Fallback –º–µ—Ö–∞–Ω—ñ–∑–º–∏:

1. **Supabase –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π** ‚Üí Polling –∫–æ–∂–Ω—ñ 15 —Å–µ–∫—É–Ω–¥
2. **Notification API –≤—ñ–¥—Å—É—Ç–Ω—ñ–π** ‚Üí –ö–æ–Ω—Å–æ–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è
3. **–ó–≤—É–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π** ‚Üí –¢–∏—Ö–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è  
4. **–í—ñ–±—Ä–∞—Ü—ñ—è –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è** ‚Üí –ü—Ä–æ–ø—É—Å–∫ —Ñ—É–Ω–∫—Ü—ñ—ó

### –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫:

```typescript
try {
  await showNotification(title, options);
  successfulNotifications++;
} catch (error) {
  console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è:', error);
  // Graceful degradation
}
```

## üîß –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

### Supabase Setup:

```typescript
// src/lib/supabase.ts
const supabaseUrl = 'your-supabase-url';
const supabaseKey = 'your-supabase-anon-key';

// –£–≤—ñ–º–∫–Ω—É—Ç–∏ Realtime –≤ Supabase Dashboard:
// 1. Database ‚Üí Replication ‚Üí –í–∫–ª—é—á–∏—Ç–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ñ scenarios
// 2. API Settings ‚Üí Realtime ‚Üí –í–∫–ª—é—á–∏—Ç–∏
```

### Permissions:

```javascript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø–∏—Ç –¥–æ–∑–≤–æ–ª—É –¥–ª—è —Å–ø–æ–≤—ñ—â–µ–Ω—å
if ('Notification' in window) {
  const permission = await Notification.requestPermission();
  // 'granted', 'denied', –∞–±–æ 'default'
}
```

## üìà –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è:

1. **–ó–º–µ–Ω—à–µ–Ω–∏–π cooldown** - –∑ 10 –¥–æ 5 —Å–µ–∫—É–Ω–¥
2. **–®–≤–∏–¥—à–∏–π polling** - –∑ 30 –¥–æ 15 —Å–µ–∫—É–Ω–¥  
3. **–ï–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–∞–ª—å–Ω–∞ –∑–∞—Ç—Ä–∏–º–∫–∞** - —Ä–æ–∑—É–º–Ω–µ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è
4. **–î–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—è** - –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –¥—É–±–ª—é–≤–∞–Ω–Ω—é
5. **Lazy cleanup** - –µ—Ñ–µ–∫—Ç–∏–≤–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤

### Memory Management:

```typescript
// –û—á–∏—â–µ–Ω–Ω—è –ø—Ä–∏ —Ä–æ–∑–º–æ–Ω—Ç—É–≤–∞–Ω–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
React.useEffect(() => {
  return () => {
    cleanupRealtimeNotifications();
  };
}, []);
```

## üéØ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ

### Checklist –¥–ª—è deploy:

- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Supabase Realtime
- [ ] –£–≤—ñ–º–∫–Ω—É—Ç–∏ Row Level Security (RLS)  
- [ ] –î–æ–¥–∞—Ç–∏ service worker –¥–ª—è push —Å–ø–æ–≤—ñ—â–µ–Ω—å
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ HTTPS (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ –¥–ª—è Notification API)
- [ ] –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö —Ç–∞ –±—Ä–∞—É–∑–µ—Ä–∞—Ö
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –∞–ª–µ—Ä—Ç–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:

1. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è** - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –≤—Å—ñ 4 –¥–µ–º–æ-—Å—Ç–æ—Ä—ñ–Ω–∫–∏
2. **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥** - –≤—ñ–¥—Å—Ç–µ–∂—É–π—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ reconnectAttempts
3. **Fallback** - –∑–∞–≤–∂–¥–∏ –º–∞—Ç–∏ polling —è–∫ —Ä–µ–∑–µ—Ä–≤
4. **UX** - –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º —Å—Ç–∞—Ç—É—Å –∑'—î–¥–Ω–∞–Ω–Ω—è
5. **Performance** - –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ cooldown –ø—ñ–¥ –≤–∞—à—ñ –ø–æ—Ç—Ä–µ–±–∏

---

## ü§ù –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–î–ª—è –ø–∏—Ç–∞–Ω—å —Ç–∞ –ø–æ–∫—Ä–∞—â–µ–Ω—å –∑–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—å –¥–æ –∫–æ–º–∞–Ω–¥–∏ —Ä–æ–∑—Ä–æ–±–∫–∏ BMB.

**–í–µ—Ä—Å—ñ—è**: 4.2.0  
**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è**: {{current_date}}  
**–°—Ç–∞—Ç—É—Å**: Production Ready ‚úÖ
