<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîî –¢–µ—Å—Ç Push-—Å–ø–æ–≤—ñ—â–µ–Ω—å BMB</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 14px;
        }
        button:hover {
            background: #0056b3;
        }
        .status {
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
            border-left: 4px solid;
        }
        .success { 
            background: #d4edda; 
            border-color: #28a745; 
            color: #155724; 
        }
        .error { 
            background: #f8d7da; 
            border-color: #dc3545; 
            color: #721c24; 
        }
        .warning { 
            background: #fff3cd; 
            border-color: #ffc107; 
            color: #856404; 
        }
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîî –¢–µ—Å—Ç Push-—Å–ø–æ–≤—ñ—â–µ–Ω—å BuyMyBehavior</h1>
        
        <div id="status" class="status warning">
            ‚è≥ –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –±—Ä–∞—É–∑–µ—Ä–∞...
        </div>

        <div style="margin: 20px 0;">
            <button onclick="checkSupport()">üîç –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É</button>
            <button onclick="requestPermission()">üîë –ó–∞–ø–∏—Ç–∞—Ç–∏ –¥–æ–∑–≤—ñ–ª</button>
            <button onclick="sendTestNotification()">üîî –¢–µ—Å—Ç–æ–≤–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è</button>
        </div>

        <div style="margin: 20px 0;">
            <h3>üé¨ –°–∏–º—É–ª—è—Ü—ñ—è —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤:</h3>
            <button onclick="simulateAgreement()">ü§ù –£–≥–æ–¥—É –ø–æ–≥–æ–¥–∂–µ–Ω–æ</button>
            <button onclick="simulateCompletion()">‚úÖ –°—Ü–µ–Ω–∞—Ä—ñ–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ</button>
            <button onclick="simulateNewScenario()">üÜï –ù–æ–≤–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π</button>
        </div>

        <div style="margin: 20px 0;">
            <h3>üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:</h3>
            <p><strong>–ü—ñ–¥—Ç—Ä–∏–º–∫–∞:</strong> <span id="support-info">–ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è...</span></p>
            <p><strong>–î–æ–∑–≤—ñ–ª:</strong> <span id="permission-info">–ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è...</span></p>
            <p><strong>–û—Å—Ç–∞–Ω–Ω—î —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è:</strong> <span id="last-notification">‚Äî</span></p>
        </div>

        <div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 6px;">
            <h4>üí° –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó:</h4>
            <ol>
                <li>–°–ø–æ—á–∞—Ç–∫—É –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å <code>–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É</code></li>
                <li>–ü–æ—Ç—ñ–º <code>–ó–∞–ø–∏—Ç–∞—Ç–∏ –¥–æ–∑–≤—ñ–ª</code> —Ç–∞ –¥–æ–∑–≤–æ–ª—å—Ç–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è</li>
                <li>–¢–µ—Å—Ç—É–π—Ç–µ —Ä—ñ–∑–Ω—ñ —Ç–∏–ø–∏ —Å–ø–æ–≤—ñ—â–µ–Ω—å</li>
                <li>–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–≤—É–∫–æ–≤—ñ —Å–∏–≥–Ω–∞–ª–∏ (üîä –≤–∫–ª—é—á—ñ—Ç—å –∑–≤—É–∫)</li>
            </ol>
        </div>
    </div>

    <script>
        class TestNotificationManager {
            constructor() {
                this.audio = null;
                this.initializeAudio();
                this.updateInfo();
            }

            initializeAudio() {
                try {
                    // –î–ª—è —Ç–µ—Å—Ç—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –∑–≤—É–∫
                    this.audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmIcBiWB0fPvhjgHGGm++OSfSwMKUqjl8bNiGgU9k9n3yXkqBSJ+z/LefDkGHWq+7OGdRQIIUKnl8bdhHggOQKnl8bdhHAgLQ6vn87fFBYGFiWxdX3SYr6yQYTY1YKHQ26thHAY/mtvyy3IlBSyBzvLYiTcIGWi77OefTAwMUKfj8LYjHAY4kdbyy3ksBSR3x/DdkEAKFF606OuoVRIKRp/g8r5iHAYlgdHz74Y4BxhpvvjknwMDClKo5fGzYhoFPZPZ98l5KgUifc/y3nw5Bh1qvuzhgTQIGWi8++OdRQQH==');
                    this.audio.volume = 0.3;
                } catch (error) {
                    console.warn('üîá –ù–µ –≤–¥–∞–ª–æ—Å—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∑–≤—É–∫:', error);
                }
            }

            updateInfo() {
                const supportEl = document.getElementById('support-info');
                const permissionEl = document.getElementById('permission-info');
                
                if ('Notification' in window) {
                    supportEl.textContent = '‚úÖ –ü—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è';
                    supportEl.style.color = '#28a745';
                } else {
                    supportEl.textContent = '‚ùå –ù–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è';
                    supportEl.style.color = '#dc3545';
                }

                const permission = this.getPermission();
                let permissionText = '';
                let permissionColor = '';
                
                switch (permission) {
                    case 'granted':
                        permissionText = '‚úÖ –î–æ–∑–≤–æ–ª–µ–Ω–æ';
                        permissionColor = '#28a745';
                        break;
                    case 'denied':
                        permissionText = '‚ùå –ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ';
                        permissionColor = '#dc3545';
                        break;
                    default:
                        permissionText = '‚è≥ –ù–µ –∑–∞–ø–∏—Ç–∞–Ω–æ';
                        permissionColor = '#ffc107';
                }
                
                permissionEl.textContent = permissionText;
                permissionEl.style.color = permissionColor;
            }

            getPermission() {
                if (!('Notification' in window)) return 'denied';
                return Notification.permission;
            }

            async requestPermission() {
                if (!('Notification' in window)) {
                    this.showStatus('‚ùå –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è', 'error');
                    return 'denied';
                }

                try {
                    const permission = await Notification.requestPermission();
                    this.updateInfo();
                    
                    if (permission === 'granted') {
                        this.showStatus('‚úÖ –î–æ–∑–≤—ñ–ª –æ—Ç—Ä–∏–º–∞–Ω–æ! –ú–æ–∂–µ—Ç–µ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è.', 'success');
                    } else {
                        this.showStatus('‚ùå –î–æ–∑–≤—ñ–ª –Ω–µ –Ω–∞–¥–∞–Ω–æ. –í–∫–ª—é—á—ñ—Ç—å —ó—Ö —É –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö –±—Ä–∞—É–∑–µ—Ä–∞.', 'error');
                    }
                    
                    return permission;
                } catch (error) {
                    this.showStatus('‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Ç—ñ –¥–æ–∑–≤–æ–ª—É: ' + error.message, 'error');
                    return 'denied';
                }
            }

            playSound() {
                if (this.audio) {
                    try {
                        this.audio.currentTime = 0;
                        this.audio.play().catch(e => {
                            console.warn('üîá –ù–µ –≤–¥–∞–ª–æ—Å—è –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –∑–≤—É–∫:', e);
                        });
                    } catch (error) {
                        console.warn('üîá –ü–æ–º–∏–ª–∫–∞ –∑–≤—É–∫—É:', error);
                    }
                }
            }

            async showNotification(title, body, options = {}) {
                if (this.getPermission() !== 'granted') {
                    this.showStatus('‚ùå –ù–µ–º–∞—î –¥–æ–∑–≤–æ–ª—É –Ω–∞ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è', 'error');
                    return false;
                }

                try {
                    this.playSound();
                    
                    const notification = new Notification(title, {
                        body,
                        icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23007bff"/><text x="50" y="60" font-size="40" text-anchor="middle" fill="white">üîî</text></svg>',
                        badge: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23007bff"/></svg>',
                        tag: options.tag || 'bmb-test',
                        requireInteraction: true,
                        ...options
                    });

                    notification.onclick = () => {
                        window.focus();
                        notification.close();
                        this.showStatus('üëÜ –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –Ω–∞—Ç–∏—Å–Ω—É—Ç–æ!', 'success');
                    };

                    setTimeout(() => notification.close(), 8000);
                    
                    const now = new Date().toLocaleTimeString();
                    document.getElementById('last-notification').textContent = `${title} (${now})`;
                    this.showStatus(`‚úÖ –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è "${title}" –ø–æ–∫–∞–∑–∞–Ω–æ`, 'success');
                    
                    return true;
                } catch (error) {
                    this.showStatus('‚ùå –ü–æ–º–∏–ª–∫–∞ –ø–æ–∫–∞–∑—É —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è: ' + error.message, 'error');
                    return false;
                }
            }

            showStatus(message, type = 'warning') {
                const statusEl = document.getElementById('status');
                statusEl.textContent = message;
                statusEl.className = `status ${type}`;
            }
        }

        // –ì–ª–æ–±–∞–ª—å–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
        const testManager = new TestNotificationManager();

        // –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è –∫–Ω–æ–ø–æ–∫
        function checkSupport() {
            testManager.updateInfo();
            if ('Notification' in window) {
                testManager.showStatus('‚úÖ –ë—Ä–∞—É–∑–µ—Ä –ø—ñ–¥—Ç—Ä–∏–º—É—î push-—Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è!', 'success');
            } else {
                testManager.showStatus('‚ùå –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î push-—Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è.', 'error');
            }
        }

        function requestPermission() {
            testManager.requestPermission();
        }

        function sendTestNotification() {
            testManager.showNotification(
                'üîî –¢–µ—Å—Ç–æ–≤–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è BMB',
                '–°–∏—Å—Ç–µ–º–∞ push-—Å–ø–æ–≤—ñ—â–µ–Ω—å –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ! üéâ',
                { tag: 'test-notification' }
            );
        }

        function simulateAgreement() {
            testManager.showNotification(
                'ü§ù –£–≥–æ–¥—É –ø–æ–≥–æ–¥–∂–µ–Ω–æ!',
                '–°—Ü–µ–Ω–∞—Ä—ñ–π "–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ —É –º–∞–≥–∞–∑–∏–Ω—ñ..." –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ –æ–±–æ–º–∞ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏. –°—É–º–∞: 50 USDT',
                { tag: 'agreement-demo' }
            );
        }

        function simulateCompletion() {
            testManager.showNotification(
                '‚úÖ –°—Ü–µ–Ω–∞—Ä—ñ–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ!',
                '–ö–æ—à—Ç–∏ —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–æ —á–µ—Ä–µ–∑ escrow. –í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ 90% –≤—ñ–¥ —Å—É–º–∏ —É–≥–æ–¥–∏.',
                { tag: 'completion-demo' }
            );
        }

        function simulateNewScenario() {
            testManager.showNotification(
                'üÜï –ù–æ–≤–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π –¥–æ—Å—Ç—É–ø–Ω–∏–π!',
                '"–†–µ–∞–∫—Ü—ñ—è –Ω–∞ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—é —Å–∫–∏–¥–∫–∏ –ø—Ä–∏ –≤–∏–±–æ—Ä—ñ —Ç–æ–≤–∞—Ä—É..." ‚Ä¢ –°—É–º–∞: 75 USDT',
                { tag: 'new-scenario-demo' }
            );
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
        window.addEventListener('load', () => {
            setTimeout(() => {
                checkSupport();
            }, 500);
        });
    </script>
</body>
</html>
